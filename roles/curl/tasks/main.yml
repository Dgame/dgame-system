- name: Install wget
  package:
    name: wget
    state: latest
  become: true

- name: make sure the latest curl is installed
  block:
    - name: Download curl
      command: wget https://curl.haxx.se/download/curl-7.83.1.zip
      changed_when: false
    - name: Unzip it
      command: unzip -o curl-7.83.1.zip
      changed_when: false
    - name: Build curl
      shell: |
        cd curl-7.83.1
        ./configure --with-openssl && make && make install
      become: true
      changed_when: false
    - name: Replace curl with latest
      command: cp --remove-destination /usr/local/bin/curl /usr/bin/curl
      become: true
      changed_when: false
  ignore_errors: yes
