ANSIBLE_PKG = ansible
PLAYBOOK = ansible-playbook
INVENTORY = -i hosts
FLAGS = --ask-become-pass

check:# install_ansible
	$(PLAYBOOK) --check $(FLAGS) $(INVENTORY) localhost.yml
install: install_ansible
	$(PLAYBOOK) $(FLAGS) $(INVENTORY) localhost.yml
vagrant: install_ansible
	@grep -q '^vagrant:' /etc/passwd && ($(PLAYBOOK) $(INVENTORY) localhost.yml || 1) || echo -e "\e[31mNope, you are not on Vagrant\e[0m"
install_ansible: update_cache
	yes | LC_ALL=en_US.UTF-8 sudo pacman -S $(ANSIBLE_PKG) --needed
update_cache:
	yes | LC_ALL=en_US.UTF-8 sudo pacman -Syu --needed
